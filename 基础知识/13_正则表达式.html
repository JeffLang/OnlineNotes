<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>正则表达式</title>
</head>

<body>
  <div>
    <span>请输入QQ号码</span>
    <input type="text" class="input">
  </div>
  <script>
    /*
    正则表达式是一种用来匹配字符串的强有力的武器
      在JavaScript中,正则表达式也是对象,构建正则表达式有两种凡是
      1.字面量创建,其由包含在斜杠之间的模式组成
      `const re = /\g+/g
      2.调用RegExp对象的构造函数
      `const reg = new RegExp("\\d+", g)`
    匹配规则
      常见的校验规则如下：

规则         描述
\           转义
^	          匹配输入的开始
$	          匹配输入的结束
*	          匹配前一个表达式 0 次或多次
+	          匹配前面一个表达式 1 次或者多次。等价于 {1,}
?	          匹配前面一个表达式 0 次或者 1 次。等价于{0,1}
.	          默认匹配除换行符之外的任何单个字符
x(?=y)	    匹配'x'仅仅当'x'后面跟着'y'。这种叫做先行断言
(?<=y)x	    匹配'x'仅当'x'前面是'y'.这种叫做后行断言
x(?!y)	    仅仅当'x'后面不跟着'y'时匹配'x'，这被称为正向否定查找
(?<!y)x	    仅仅当'x'前面不是'y'时匹配'x'，这被称为反向否定查找
x|y	        匹配‘x’或者‘y’
{n}	        n 是一个正整数，匹配了前面一个字符刚好出现了 n 次
{n,}	      n是一个正整数，匹配前一个字符至少出现了n次
{n,m}	      n 和 m 都是整数。匹配前面的字符至少n次，最多m次
[xyz]	      一个字符集合。匹配方括号中的任意字符
[^xyz]	    匹配任何没有包含在方括号中的字符
\b	        匹配一个词的边界，例如在字母和空格之间
\B	        匹配一个非单词边界
\d	        匹配一个数字
\D	        匹配一个非数字字符
\f	        匹配一个换页符
\n	        匹配一个换行符
\r	        匹配一个回车符
\s	        匹配一个空白字符，包括空格、制表符、换页符和换行符
\S	        匹配一个非空白字符
\w	        匹配一个单字字符（字母、数字或者下划线）
\W	        匹配一个非单字字符
    */

    // 贪婪模式
    // const string1 = 'abc'
    // const reg1 = /ab{1,3}c/
    // console.log(string1.match(reg1))

    // const string2 = '12345'


    // const reg2 = //

    // const regexp = /test(\d?)/g;
    // const str = 'test1test2';

    // console.log(str.match(regexp))

    // const array = [...str.matchAll(regexp)];
    // console.log('array', array);

    // console.log(array[0]);
    // expected output: Array ["test1", "e", "st1", "1"]

    // console.log(array[1]);
    // expected output: Array ["test2", "e", "st2", "2"]

    // 输入QQ号码校验
    // const inputNode = document.documentElement.getElementsByClassName('input')
    // 5~15位，不能以0开头的纯数字
    /* const reg = /^[1-9][0-9]{4,14}$/
    console.log('inputNode', inputNode)
    inputNode[0].oninput = (e) => {
      console.log('e', e.target.value)
      // 校验
      console.log((e.target.value + '').match(reg))
      if ((e.target.value + '').match(reg)) {
        console.log('匹配成功')
      } else {
        console.log('匹配失败')
      }
    } */
    /* 
    校验用户账号合法性（只能输入5-20个以字母开头、可带数字、“_”、“.”的字串）：
    */
    // const reg2 = /^[a-zA-Z]{1}([a-zA-Z0-9]|[_.]){4,19}/


    // 将url解析为对象

    // 匹配https:/http: 并且取别名为 protocol
    const protocol = '(?<protocol>https?:)';
    const host = '(?<host>(?<hostname>[^/#?:]+)(?::(?<port>\\d+))?)';
    const path = '(?<pathname>(?:\\/[^/#?]+)*\\/?)';
    const search = '(?<search>(?:\\?[^#]*)?)';
    const hash = '(?<hash>(?:#.*)?)';
    const reg = new RegExp(`^${protocol}\/\/${host}${path}${search}${hash}$`);
    console.log('reg', reg.exec('http://127.0.0.1:5500/13_%E6%AD%A3%E5%88%99%E8%A1%A8%E8%BE%BE%E5%BC%8F.html'));
  </script>
</body>

</html>